{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '42057283-adafa6fc2ce046555d94b0faa';\nlet loading = document.querySelector('.loading');\n\nconst refs = {\n    form: document.querySelector('.form'),  \n    input: document.querySelector('.form-input'), \n    gallery: document.querySelector('.gallery'),\n    searchBtn: document.querySelector('.search-button'), \n};\n\nfunction showErrorMessage(message) {\n    iziToast.show({\n      position: 'topLeft',\n      message,\n      backgroundColor: '#EF4040',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      close: false,\n      closeOnClick: true,\n      closeOnEscape: true,\n    });\n  }\n\n  const lightbox = new SimpleLightbox('.gallery-item a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\nrefs.form.addEventListener('submit', submitFunction);\n\nfunction hideLoader() {\n    setTimeout(() => {\n        loading.classList.add('is-hidden');\n        }, 500);\n  };\n\n  function showLoader() {\n    loading.classList.remove('is-hidden')\n  }; \n\nfunction submitFunction(event) {\n    event.preventDefault();\n    refs.gallery.innerHTML = '';\n    const form = event.currentTarget;\n    \n    const name = form.elements.input.value.trim();\n    showLoader()\n\n    if (!name) {\n      hideLoader()\n      showErrorMessage('Please enter a search term');\n      return;\n    }\n\n    \n    imageByName(name)\n        .then(data => {\n            const hits = data.hits;\n            if(hits.length === 0){\n              showErrorMessage(\"Sorry, there are no images matching your search query. Please try again!\")\n            }\n            const markup = hits.map(largeImageURL => createMarkUp(largeImageURL)).join(' ');\n            refs.gallery.innerHTML = markup;\n            lightbox.refresh();\n        }).catch()\n        .finally(() => form.reset()).finally(hideLoader());\n}\n\nfunction imageByName(name){\n    return fetch(`${BASE_URL}/?key=${API_KEY}&q=${name}&image_type=photo&orientation=horizontal&safesearch=true`)\n    .then(res => {\n        if(!res.ok){\n            createMessage(\n                `The search field can't be empty! Please, enter your request!`\n              );\n              return;\n            }\n        return res.json()\n    })\n}\n\nfunction createMarkUp({webformatURL,largeImageURL,tags,likes,views,comments,downloads,}){\n    return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n        <p class=\"gallery-descr\">\n        <span class=\"cont-in-p\">\n        <svg\n        width=\"20\"\n        height=\"20\"\n        class=\"icon-in-block\">\n        <use href=\"../icons.svg#icon-heart\"></use>\n        </svg>\n        <span class=\"descr-span\">${likes}</span> \n        </span>\n        <span class=\"cont-in-p\">\n        <svg\n        width=\"20\"\n        height=\"20\"\n        class=\"icon-in-block\">\n        <use href=\"../icons.svg#icon-eye\"></use>\n        </svg>\n        <span class=\"descr-span\">${views}</span> \n        </span>\n        <span class=\"cont-in-p\">\n        <svg\n        width=\"20\"\n        height=\"20\"\n        class=\"icon-in-block\">\n        <use href=\"../icons.svg#icon-bubble2\"></use>\n        </svg>\n        <span class=\"descr-span\">${comments}</span> \n        </span>\n        <span class=\"cont-in-p\">\n        <svg\n        width=\"20\"\n        height=\"20\"\n        class=\"icon-in-block\">\n        <use href=\"../icons.svg#icon-arrow-down\"></use>\n        </svg>\n        <span class=\"descr-span\">${downloads}</span>\n        </span>\n        </p>\n      </a>\n    </li>`\n}"],"names":["BASE_URL","API_KEY","loading","refs","showErrorMessage","message","iziToast","lightbox","SimpleLightbox","submitFunction","hideLoader","showLoader","event","form","name","imageByName","data","hits","markup","largeImageURL","createMarkUp","res","webformatURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAW,0BACXC,EAAU,qCAChB,IAAIC,EAAU,SAAS,cAAc,UAAU,EAE/C,MAAMC,EAAO,CACT,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,aAAa,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,UAAW,SAAS,cAAc,gBAAgB,CACtD,EAEA,SAASC,EAAiBC,EAAS,CAC/BC,EAAS,KAAK,CACZ,SAAU,UACV,QAAAD,EACA,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,MAAO,GACP,aAAc,GACd,cAAe,EACrB,CAAK,CACF,CAED,MAAME,EAAW,IAAIC,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GAClB,CAAG,EAEHL,EAAK,KAAK,iBAAiB,SAAUM,CAAc,EAEnD,SAASC,GAAa,CAClB,WAAW,IAAM,CACbR,EAAQ,UAAU,IAAI,WAAW,CAChC,EAAE,GAAG,CAEd,CACE,SAASS,GAAa,CACpBT,EAAQ,UAAU,OAAO,WAAW,CAExC,CACA,SAASO,EAAeG,EAAO,CAC3BA,EAAM,eAAc,EACpBT,EAAK,QAAQ,UAAY,GACzB,MAAMU,EAAOD,EAAM,cAEbE,EAAOD,EAAK,SAAS,MAAM,MAAM,OAGvC,GAFAF,EAAY,EAER,CAACG,EAAM,CACTJ,EAAY,EACZN,EAAiB,4BAA4B,EAC7C,MACD,CAGDW,EAAYD,CAAI,EACX,KAAKE,GAAQ,CACV,MAAMC,EAAOD,EAAK,KACfC,EAAK,SAAW,GACjBb,EAAiB,0EAA0E,EAE7F,MAAMc,EAASD,EAAK,IAAIE,GAAiBC,EAAaD,CAAa,CAAC,EAAE,KAAK,GAAG,EAC9EhB,EAAK,QAAQ,UAAYe,EACzBX,EAAS,QAAO,CACnB,CAAA,EAAE,MAAO,EACT,QAAQ,IAAMM,EAAK,MAAK,CAAE,EAAE,QAAQH,EAAU,CAAE,CACzD,CAEA,SAASK,EAAYD,EAAK,CACtB,OAAO,MAAM,GAAGd,CAAQ,SAASC,CAAO,MAAMa,CAAI,0DAA0D,EAC3G,KAAKO,GAAO,CACT,GAAG,CAACA,EAAI,GAAG,CACP,cACI,8DAChB,EACc,MACD,CACL,OAAOA,EAAI,KAAM,CACzB,CAAK,CACL,CAEA,SAASD,EAAa,CAAC,aAAAE,EAAa,cAAAH,EAAc,KAAAI,EAAK,MAAAC,EAAM,MAAAC,EAAM,SAAAC,EAAS,UAAAC,GAAY,CACpF,MAAO;AAAA;AAAA,sCAE2BR,CAAa;AAAA;AAAA;AAAA,eAGpCG,CAAY;AAAA,eACZC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAUgBC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCASLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCASLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCASRC,CAAS;AAAA;AAAA;AAAA;AAAA,UAK5C"}